FROM ghcr.io/bioconductor/bioconductor:devel
RUN sudo apt-get update && sudo apt-get -y install apt-file && git clone https://github.com/rformassspectrometry/docs; sed -i 's/deps2 <- c[(]/deps2 <- c(\x22pheatmap\x22, \x22rhdf5\x22, /g' docs/install_docs_deps.R; Rscript docs/install_docs_deps.R; rm -rf docs; BiocManager::install('preprocessCore', configure.args='--disable-threading', force = TRUE); cd /home/rstudio && echo "./*" | tr ',' '\n' > vignlist && git clone https://github.com/rformassspectrometry/docs && cp -r docs tmpsource && cd tmpsource && curl -o install.sh https://raw.githubusercontent.com/Bioconductor/workshop-contributions/main/.github/scripts/install_missing.sh && cat ../vignlist | xargs -i bash install.sh {} && cd .. && rm -rf vignlist tmpsource/
